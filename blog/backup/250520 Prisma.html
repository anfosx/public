<!DOCTYPE html>
<html lang="zh-CN">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="Prisma" />
    <meta name="hexo-theme-A4" content="v2.0.0" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>å®‰å¾·é²</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


   
        
<link rel="stylesheet" href="/css/custom.css">

    
    <link rel='stylesheet' href='https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkai/dist/LXGWWenKai-Regular/result.css' /> 
<meta name="generator" content="Hexo 7.3.0"></head>
    
    

    
    



    

    
    




    
    


    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            
        
        <div class="paper">

            

            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 0; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/favicon.webp" 
        />
        <div class="header-content">
            <a class="logo" href="/">å®‰å¾·é²</a> 
            <span class="description"></span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
            
                <li><a href="/project/">ä½œå“</a></li>
            
        
            
                <li><a href="/about/">å…³äº</a></li>
            
        
    </ul>
</div>

                    
                    

                    
                    

                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    

    

    <div class="post-md">
        
            
        
        <div class=".article-gallery"><h2 id="Prisma-åŸºç¡€"><a href="#Prisma-åŸºç¡€" class="headerlink" title="Prisma åŸºç¡€"></a>Prisma åŸºç¡€</h2><h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx prisma init           # åˆå§‹åŒ– Prisma é¡¹ç›®</span><br><span class="line">npx prisma migrate dev    # åº”ç”¨å¹¶è®°å½•è¿ç§»</span><br><span class="line">npx prisma generate       # ç”Ÿæˆ prisma client</span><br><span class="line">npx prisma studio         # æ‰“å¼€æ•°æ®åº“å¯è§†åŒ–ç•Œé¢</span><br><span class="line">npx prisma db seed        # è¿è¡Œç§å­è„šæœ¬</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥è¯¢è¯­æ³•æ€»ç»“"><a href="#æŸ¥è¯¢è¯­æ³•æ€»ç»“" class="headerlink" title="æŸ¥è¯¢è¯­æ³•æ€»ç»“"></a>æŸ¥è¯¢è¯­æ³•æ€»ç»“</h4><h6 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h6><ul>
<li>include åŒ…å«å…³ç³»</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">prisma.<span class="property">user</span>.<span class="title function_">findMany</span>(&#123;</span><br><span class="line">  <span class="attr">where</span>: &#123; <span class="attr">isDeleted</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  <span class="attr">include</span>: &#123; <span class="attr">userOrg</span>: &#123; <span class="attr">include</span>: &#123; <span class="attr">org</span>: <span class="literal">true</span> &#125; &#125; &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>select ç²¾å‡†æå­—æ®µ ä¸èƒ½ä¸ include è”ç”¨</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">prisma.<span class="property">user</span>.<span class="title function_">findMany</span>(&#123;</span><br><span class="line">  <span class="attr">where</span>: &#123; <span class="attr">isDeleted</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  <span class="attr">select</span>: &#123;</span><br><span class="line">    <span class="attr">nickname</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">userOrg</span>: &#123;</span><br><span class="line">      <span class="attr">orgId</span>:<span class="literal">true</span></span><br><span class="line">      <span class="attr">org</span>: &#123; <span class="attr">id</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">include</span>:&#123;&#125; âŒ</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h6 id="å¤šå¯¹å¤šï¼ˆå…³è”è¡¨ï¼‰"><a href="#å¤šå¯¹å¤šï¼ˆå…³è”è¡¨ï¼‰" class="headerlink" title="å¤šå¯¹å¤šï¼ˆå…³è”è¡¨ï¼‰"></a>å¤šå¯¹å¤šï¼ˆå…³è”è¡¨ï¼‰</h6><ul>
<li>user.userOrg è¿æ¥ User ä¸ Org</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">model <span class="title class_">Org</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  userOrg <span class="title class_">UserOrg</span>[] <span class="comment">// å…³è”å…³ç³»å®¹å™¨</span></span><br><span class="line">&#125;</span><br><span class="line">model <span class="title class_">User</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  userOrg <span class="title class_">UserOrg</span>[] <span class="comment">// å…³è”å…³ç³»å®¹å™¨</span></span><br><span class="line">&#125;</span><br><span class="line">model <span class="title class_">UserOrg</span> &#123;</span><br><span class="line">  id     <span class="title class_">String</span>  <span class="meta">@id</span> <span class="meta">@default</span>(<span class="title function_">uuid</span>())</span><br><span class="line">  userId <span class="title class_">String</span></span><br><span class="line">  user   <span class="title class_">User</span>    <span class="meta">@relation</span>(<span class="attr">fields</span>: [userId], <span class="attr">references</span>: [id]) <span class="comment">// å®ä½“æ•°æ®</span></span><br><span class="line">  org    <span class="title class_">Org</span>     <span class="meta">@relation</span>(<span class="attr">fields</span>: [orgId], <span class="attr">references</span>: [id]) <span class="comment">// å®ä½“æ•°æ®</span></span><br><span class="line">  orgId  <span class="title class_">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>include åµŒå¥—ç»“æ„è®¿é—®</li>
<li>some â€œæœ‰ä¸€æ¡æ•°æ®æ»¡è¶³â€ å°±æŸ¥å‡ºæ¥å¯¹åº”çš„æ•°æ®</li>
<li>every éœ€è¦æ‰€æœ‰æ•°æ® â€œå…¨éƒ¨æ»¡è¶³â€ æ¡ä»¶ã€‚æ‰æŸ¥å‡ºæ¥</li>
<li>none ä¸å±äº none æ¡ä»¶</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">where</span>: &#123;</span><br><span class="line">  <span class="attr">userOrg</span>: &#123;</span><br><span class="line">    <span class="attr">some</span>: &#123;</span><br><span class="line">      <span class="attr">orgId</span>: &#123; <span class="attr">in</span>: [<span class="string">&#x27;org1&#x27;</span>, <span class="string">&#x27;org2&#x27;</span>] &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Prisma-è¿›é˜¶"><a href="#Prisma-è¿›é˜¶" class="headerlink" title="Prisma è¿›é˜¶"></a>Prisma è¿›é˜¶</h2><h4 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">prisma.<span class="property">user</span>.<span class="title function_">findMany</span>(&#123;</span><br><span class="line">  <span class="attr">skip</span>: (page - <span class="number">1</span>) * pageSize,</span><br><span class="line">  <span class="attr">take</span>: pageSize,</span><br><span class="line">  <span class="attr">orderBy</span>: &#123; <span class="attr">createAt</span>: <span class="string">&quot;desc&quot;</span> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="äº‹åŠ¡å¤„ç†"><a href="#äº‹åŠ¡å¤„ç†" class="headerlink" title="äº‹åŠ¡å¤„ç†"></a>äº‹åŠ¡å¤„ç†</h4><ul>
<li>å¤šä¸ªæ“ä½œæ‰“åŒ…æ‰§è¡Œï¼Œä»»ä¸€å¤±è´¥å…¨éƒ¨å›æ»š</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> prisma.$transaction([</span><br><span class="line">  prisma.<span class="property">user</span>.<span class="title function_">create</span>(&#123; <span class="attr">data</span>: &#123; ... &#125; &#125;),</span><br><span class="line">  prisma.<span class="property">userOrg</span>.<span class="title function_">create</span>(&#123; <span class="attr">data</span>: &#123; ... &#125; &#125;),</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æˆ–</span></span><br><span class="line"><span class="keyword">await</span> prisma.$transaction(<span class="title function_">async</span> (tx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> tx.<span class="property">user</span>.<span class="title function_">update</span>(&#123; ... &#125;)</span><br><span class="line">  <span class="keyword">await</span> tx.<span class="property">userOrg</span>.<span class="title function_">create</span>(&#123; ... &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="èšåˆå’Œåˆ†ç»„"><a href="#èšåˆå’Œåˆ†ç»„" class="headerlink" title="èšåˆå’Œåˆ†ç»„"></a>èšåˆå’Œåˆ†ç»„</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">groupBy</span>(&#123;</span><br><span class="line">  <span class="attr">by</span>: [<span class="string">&quot;status&quot;</span>],</span><br><span class="line">  <span class="attr">_count</span>: &#123; <span class="attr">_all</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Prisma-åšä¸åˆ°æˆ–ä¸æ¨èçš„æƒ…å†µ"><a href="#Prisma-åšä¸åˆ°æˆ–ä¸æ¨èçš„æƒ…å†µ" class="headerlink" title="Prisma åšä¸åˆ°æˆ–ä¸æ¨èçš„æƒ…å†µ"></a>Prisma åšä¸åˆ°æˆ–ä¸æ¨èçš„æƒ…å†µ</h2><h4 id="ä¸€ã€é€’å½’æŸ¥è¯¢ï¼ˆå¦‚æŸ¥æ‰¾æŸä¸ªç»„ç»‡çš„æ‰€æœ‰å­ç»„ç»‡ï¼‰"><a href="#ä¸€ã€é€’å½’æŸ¥è¯¢ï¼ˆå¦‚æŸ¥æ‰¾æŸä¸ªç»„ç»‡çš„æ‰€æœ‰å­ç»„ç»‡ï¼‰" class="headerlink" title="ä¸€ã€é€’å½’æŸ¥è¯¢ï¼ˆå¦‚æŸ¥æ‰¾æŸä¸ªç»„ç»‡çš„æ‰€æœ‰å­ç»„ç»‡ï¼‰"></a>ä¸€ã€é€’å½’æŸ¥è¯¢ï¼ˆå¦‚æŸ¥æ‰¾æŸä¸ªç»„ç»‡çš„æ‰€æœ‰å­ç»„ç»‡ï¼‰</h4><ul>
<li>ä¾‹å­åœºæ™¯ï¼šæœ‰ä¸€ä¸ªç»„ç»‡ Org è¡¨ï¼Œå­—æ®µåŒ…æ‹¬ id, parentIdï¼Œæƒ³è¦æŸ¥è¯¢æŸä¸ªç»„ç»‡çš„æ‰€æœ‰å­ç»„ç»‡ï¼ˆåŒ…æ‹¬å­™å­ç»„ç»‡ã€æ›¾å­™ç­‰ï¼‰</li>
<li>Prisma çš„é™åˆ¶ï¼šPrisma ç›®å‰ä¸æ”¯æŒé€’å½’æŸ¥è¯¢ï¼ˆä¹Ÿä¸æ”¯æŒé€’å½’ CTEï¼‰ã€‚</li>
<li>å°æŠ€å·§ï¼šâ€œå¦‚æœæ•°æ®é‡ä¸å¤šçš„æƒ…å†µä¸‹â€ï¼Œå¯ä»¥ä¸€æ¬¡æŸ¥å‡ºæ¥æ‰€æœ‰æ•°æ®ï¼Œç„¶åæ‰‹å†™é€’å½’æ–¹æ³•ï¼Œå°†æ•°æ®æŸ¥å‡ºæ¥</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> <span class="keyword">RECURSIVE</span> org_tree <span class="keyword">AS</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> org <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="string">&#x27;root-org-id&#x27;</span></span><br><span class="line">  <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">  <span class="keyword">SELECT</span> o.<span class="operator">*</span> <span class="keyword">FROM</span> org o</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> org_tree ot <span class="keyword">ON</span> o.parent_id <span class="operator">=</span> ot.id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> org_tree;</span><br></pre></td></tr></table></figure>

<h4 id="äºŒã€å¤æ‚çš„å­æŸ¥è¯¢ï¼ˆå¦‚èšåˆåå†è¿‡æ»¤ï¼‰"><a href="#äºŒã€å¤æ‚çš„å­æŸ¥è¯¢ï¼ˆå¦‚èšåˆåå†è¿‡æ»¤ï¼‰" class="headerlink" title="äºŒã€å¤æ‚çš„å­æŸ¥è¯¢ï¼ˆå¦‚èšåˆåå†è¿‡æ»¤ï¼‰"></a>äºŒã€å¤æ‚çš„å­æŸ¥è¯¢ï¼ˆå¦‚èšåˆåå†è¿‡æ»¤ï¼‰</h4><ul>
<li>ä¾‹å­åœºæ™¯ï¼šæŸ¥æ‰¾è‡³å°‘åŠ å…¥è¿‡ 3 ä¸ªç»„ç»‡çš„ç”¨æˆ·ã€‚</li>
<li>Prisma çš„é™åˆ¶ï¼šPrisma ç›®å‰ä¸æ”¯æŒå­æŸ¥è¯¢åšè¿‡æ»¤ï¼Œæ¯”å¦‚ HAVING å­å¥å’Œèšåˆåè¿‡æ»¤çš„åœºæ™¯ã€‚</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> user_id</span><br><span class="line"><span class="keyword">FROM</span> user_org</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> user_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(org_id) <span class="operator">&gt;=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<h4 id="ä¸‰ã€çª—å£å‡½æ•°ï¼ˆå¦‚æŸ¥æ¯ä¸ªç”¨æˆ·æœ€æ–°ç™»å½•æ—¶é—´ï¼‰"><a href="#ä¸‰ã€çª—å£å‡½æ•°ï¼ˆå¦‚æŸ¥æ¯ä¸ªç”¨æˆ·æœ€æ–°ç™»å½•æ—¶é—´ï¼‰" class="headerlink" title="ä¸‰ã€çª—å£å‡½æ•°ï¼ˆå¦‚æŸ¥æ¯ä¸ªç”¨æˆ·æœ€æ–°ç™»å½•æ—¶é—´ï¼‰"></a>ä¸‰ã€çª—å£å‡½æ•°ï¼ˆå¦‚æŸ¥æ¯ä¸ªç”¨æˆ·æœ€æ–°ç™»å½•æ—¶é—´ï¼‰</h4><ul>
<li><p>ä¾‹å­åœºæ™¯ï¼šä½ æœ‰ä¸€ä¸ª user_login_log è¡¨ï¼Œæƒ³è·å–æ¯ä¸ªç”¨æˆ·æœ€è¿‘çš„ä¸€æ¬¡ç™»å½•æ—¶é—´ã€‚</p>
</li>
<li><table>
<thead>
<tr>
<th>user_id</th>
<th>login_time</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>2024-01-01 10:00:00</td>
</tr>
<tr>
<td>A</td>
<td>2024-01-02 08:00:00</td>
</tr>
<tr>
<td>A</td>
<td>2024-01-03 09:00:00</td>
</tr>
<tr>
<td>B</td>
<td>2024-01-01 09:00:00</td>
</tr>
<tr>
<td>B</td>
<td>2024-01-03 11:00:00</td>
</tr>
</tbody></table>
</li>
<li><p>ç»“æœ</p>
</li>
<li><table>
<thead>
<tr>
<th>user_id</th>
<th>login_time</th>
<th>login_order</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>2024-01-01 10:00:00</td>
<td>1</td>
</tr>
<tr>
<td>A</td>
<td>2024-01-02 08:00:00</td>
<td>2</td>
</tr>
<tr>
<td>A</td>
<td>2024-01-03 09:00:00</td>
<td>3</td>
</tr>
<tr>
<td>B</td>
<td>2024-01-01 09:00:00</td>
<td>1</td>
</tr>
<tr>
<td>B</td>
<td>2024-01-03 11:00:00</td>
<td>2</td>
</tr>
</tbody></table>
</li>
<li><p>Prisma çš„é™åˆ¶ï¼š Prisma ä¸æ”¯æŒçª—å£å‡½æ•°ï¼ˆå¦‚ ROW_NUMBER(), RANK(), OVER() ç­‰ï¼‰ã€‚</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span>, <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> user_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> login_time <span class="keyword">DESC</span>) <span class="keyword">as</span> login_order</span><br><span class="line">  <span class="keyword">FROM</span> user_login_log</span><br><span class="line">) t</span><br><span class="line"><span class="keyword">WHERE</span> rn <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h4 id="å››ã€åŠ¨æ€æŸ¥è¯¢ï¼ˆå­—æ®µååŠ¨æ€ã€IN-æŸ¥è¯¢åŠ¨æ€æ„é€ ï¼‰"><a href="#å››ã€åŠ¨æ€æŸ¥è¯¢ï¼ˆå­—æ®µååŠ¨æ€ã€IN-æŸ¥è¯¢åŠ¨æ€æ„é€ ï¼‰" class="headerlink" title="å››ã€åŠ¨æ€æŸ¥è¯¢ï¼ˆå­—æ®µååŠ¨æ€ã€IN æŸ¥è¯¢åŠ¨æ€æ„é€ ï¼‰"></a>å››ã€åŠ¨æ€æŸ¥è¯¢ï¼ˆå­—æ®µååŠ¨æ€ã€IN æŸ¥è¯¢åŠ¨æ€æ„é€ ï¼‰</h4><ul>
<li>ä¾‹å­åœºæ™¯ï¼šç”¨æˆ·ä¼ äº†å­—æ®µåå’Œå­—æ®µå€¼åšç­›é€‰ï¼Œæ¯”å¦‚ â€œemailâ€ã€â€phoneâ€ ç­‰å­—æ®µåæ˜¯ä¸å›ºå®šçš„ã€‚</li>
<li>Prisma çš„é™åˆ¶ï¼šPrisma çš„æŸ¥è¯¢ç»“æ„æ˜¯é™æ€ç±»å‹å®šä¹‰ï¼Œä¸å…è®¸ä½ ä¼ å­—ç¬¦ä¸²å½“ä½œå­—æ®µåã€‚</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> &quot;user&quot;</span><br><span class="line"><span class="keyword">WHERE</span> &quot;phone&quot; <span class="operator">=</span> <span class="string">&#x27;1234567890&#x27;</span>; <span class="comment">-- phoneæ˜¯å­—ç¬¦ä¸²,ä½†æ˜¯åœ¨sqlä¸­å¯ä»¥ä»£è¡¨è¡¨å</span></span><br></pre></td></tr></table></figure>
</div>
    </div>

    <div class="post-meta">
        <i>
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                

                
            </div>
    
        
    

    
        

     
</div>




                    

                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>
<script src="/js/emojiHandler.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        wrapEmojis('.paper');
    });
</script>
